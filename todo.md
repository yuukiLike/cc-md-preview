# Todo

> 更新于 2026-02-21

## 当前状态
- 分支：main
- 未提交变更：无
- 最近完成：文件夹扫描功能（Rust 端递归扫描 + 前端卡片网格展示），Rust 代码全面添加中文注释，CLAUDE.md 新增 cargo doc 约定

## 进行中
- [ ] 命令命名优化：当前命令名风格不统一（/s-commit 带连字符、/goodgame 是拼接词、/feat 是缩写），下次应该统一审视一遍，考虑命名一致性

## 下次要做

### 待讨论：文件夹打开后的浏览布局
- 当前实现：打开文件夹后显示卡片网格，点击卡片进入预览，左上角 "Back to folder" 返回
- 问题：是否需要左侧侧边栏显示文件树？用户认为传统文件树太普通，想要更有趣的交互
- 可能的方向：资源管理器风格布局？或者其他创意方案？
- **需要先讨论确定方案再动手**

### 功能增强
- [ ] **主题持久化**：当前选择的主题刷新后丢失，需要保存到客户端本地存储（localStorage 或 Tauri 的 store plugin），下次打开时自动恢复
- [ ] **最近打开**：记录用户最近打开过的文件和文件夹，在首页或某个入口展示，方便快速重新打开
- [ ] **快捷键系统 + Help 引导页**：
  - 需要设计一套完整的快捷键方案，按功能分类：
    - 文件操作：`Ctrl+O` 打开文件、打开文件夹
    - 浏览导航：`↑↓` 上下滚动、`Enter` 跳到下一章节、`Tab` 切换文件/章节
    - 视图切换：切换主题、切换视图模式
  - 快捷键 Help 引导：按 `?` 或某个快捷键弹出帮助面板，展示所有快捷键
  - 待讨论：是否用动图/动画展示各快捷键的效果（需评估对包体积的影响，如果增大太多则用静态图或纯文本）
  - 快捷键分类和具体绑定需要详细设计后再实现

### 待讨论：Chrome Cache 模块去留
- 产品方向调整：希望做一个更纯粹的 Markdown 阅读器
- Chrome Cache 清理功能与 Markdown 阅读无关，考虑隐藏或删除
- 涉及文件：`src/modules/chrome-cache/`、`src-tauri/src/commands/chrome_cache.rs`、`src-tauri/src/platform/`、侧边栏路由
- 需要决定：直接删除 vs 隐藏入口保留代码 vs 做成可选插件

### Bug 修复
- [ ] **图片无法预览**：.md 文档中的图片没有正确显示。可能原因：Tauri 的 CSP 限制了外部图片加载，或者本地图片的相对路径没有正确解析为 `asset:` 协议。需要排查 `src-tauri/tauri.conf.json` 的 CSP 配置和 `convertFileSrc` API
- [ ] **链接应使用系统浏览器打开**：当前点击 .md 中的链接行为未知（可能在 WebView 内跳转），应该拦截链接点击事件，调用系统默认浏览器打开。需要 Tauri 的 `shell:open` 权限（当前未开放），或在前端拦截 `<a>` 标签的 click 事件

## 代码中的 TODO
- 无

## 备忘
- 移动端支持是新增需求，需要调研 Tauri v2 移动端的文件访问 API 和限制
- Rust 模块已改为 `pub mod` 以支持 `cargo doc --no-deps --open` 生成 API 文档
- `///` 是 Rust 文档注释（会被 cargo doc 提取），`//` 是普通注释（不会出现在文档中）
- `cargo clean --doc` 可以只清除文档产物，不影响编译缓存
